(function(){"use strict";var e={5320:function(e,n,t){var i=t(3864);const s=["data-page-index"],a={key:0,class:"question-container"},o=["id"],r={key:1,class:"question-container"},l=["id"],u={key:2,class:"question-container"},d=["id"],h={key:3,class:"question-container"},c=["id"],p={key:4,class:"question-container"},m=["id"],g={key:5,class:"question-container"},q=["id"],v={class:"row flow-navigation"},b={class:"col"};function f(e,n,t,f,C,L){const k=(0,i.g2)("SingleChoiceQuestion"),x=(0,i.g2)("MultiChoiceQuestion"),y=(0,i.g2)("OpenQuestion"),E=(0,i.g2)("MatrixQuestion"),M=(0,i.g2)("SemanticDifferential"),T=(0,i.g2)("TransitionQuestion");return(0,i.uX)(),(0,i.CE)(i.FK,null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.parsedQuestConfig,(n=>(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{key:n.question,"data-page-index":n.page},["single_choice"===n.type?((0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(k,{qid:n.question,text:n.text,items:n.items,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","items","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,o)])):(0,i.Q3)("",!0),"multi_choice"===n.type?((0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(x,{qid:n.question,text:n.text,items:n.items,required:n.required,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","items","required","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,l)])):(0,i.Q3)("",!0),"open"===n.type?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(y,{qid:n.question,text:n.text,options:n.options,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","options","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,d)])):(0,i.Q3)("",!0),"matrix"===n.type?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(E,{qid:n.question,text:n.text,items:n.items,scale:n.scale,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,c)])):(0,i.Q3)("",!0),"semantic_diff"===n.type?((0,i.uX)(),(0,i.CE)("div",p,[(0,i.bF)(M,{qid:n.question,text:n.text,items:n.items,scale:n.scale,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,m)])):(0,i.Q3)("",!0),"transition"===n.type?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)(T,{qid:n.question,text:n.text,onResponseChanged:L.updateResponses,class:"question-body"},null,8,["qid","text","onResponseChanged"]),(0,i.Lk)("div",{id:"required-hint-"+n.question,class:"required-hint hidden"},(0,i.v_)(e.$t("required-but-missing-hint")),9,q)])):(0,i.Q3)("",!0)],8,s)),[[i.aG,C.currentPage===n.page]]))),128)),(0,i.Lk)("div",v,[(0,i.Lk)("div",b,[(0,i.Lk)("button",{class:"flow-btn",type:"button",onClick:n[0]||(n[0]=e=>(L.next(),L.scrollToTop()))},(0,i.v_)(e.$t("next-btn-label"))+"  ›",1)])])],64)}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949);const C=["innerHTML"],L=["id"],k={class:"form-check-label rb-cb-label"},x=["dataid","name","value"],y=["innerHTML"];function E(e,n,t,s,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,C),(0,i.Lk)("div",{id:"answer-"+t.qid,class:"question-response-body"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"question-choice-item form-check"},[(0,i.Lk)("label",k,[(0,i.Lk)("input",{class:"form-check-input",type:"radio",dataid:t.qid,name:"q-"+t.qid,value:e.value,onChange:n[0]||(n[0]=e=>o.responseChanged(e))},null,40,x),(0,i.Lk)("span",{innerHTML:e.label},null,8,y)])])))),128))],8,L)])}var M={name:"SingleChoiceQuestion",props:["qid","text","items"],emits:["responseChanged"],data:function(){return{response:""}},created(){this.response=-99,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}},T=t(6262);const _=(0,T.A)(M,[["render",E]]);var X=_;const w=["innerHTML"],H={class:"question-response-body"},Q={class:"form-check-label rb-cb-label"},S=["name","value"],$=["innerHTML"];function R(e,n,t,s,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,w),(0,i.Lk)("div",H,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"question-choice-item form-check"},[(0,i.Lk)("label",Q,[(0,i.Lk)("input",{class:"form-check-input",type:"checkbox",name:e.id,value:e.value,onChange:n[0]||(n[0]=e=>o.responseChanged(e))},null,40,S),(0,i.Lk)("span",{innerHTML:e.label},null,8,$)])])))),128))])])}var F={name:"MultiChoiceQuestion",props:["qid","text","items"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=!1})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.checked,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const O=(0,T.A)(F,[["render",R]]);var P=O;const A=["innerHTML"],z=["id"],K=["name","maxlength"],I=["name","maxlength"],j=["name","maxlength"],D={class:"input-hint"},N=["name","maxlength"],Z={class:"input-hint hint-invalid-input pb-0 mb-0"},B={class:"input-hint"};function U(e,n,t,s,a,o){const r=(0,i.gN)("only-digits"),l=(0,i.gN)("valid-email");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,A),(0,i.Lk)("div",{id:"answer-"+t.qid,class:"question-response-body"},["text"===t.options.input_type?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},["small"===t.options.display?((0,i.uX)(),(0,i.CE)("input",{key:0,type:"text",name:t.qid,maxlength:o.getMaxLength,onChange:n[0]||(n[0]=e=>o.responseChanged(e))},null,40,K)):(0,i.Q3)("",!0),"large"===t.options.display?((0,i.uX)(),(0,i.CE)("textarea",{key:1,class:"open-question-textarea",type:"text",name:t.qid,maxlength:o.getMaxLength,onChange:n[1]||(n[1]=e=>o.responseChanged(e))},null,40,I)):(0,i.Q3)("",!0)],64)):"numbers"===t.options.input_type?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bo)((0,i.Lk)("input",{type:"text",name:t.qid,maxlength:o.getMaxLength,onChange:n[2]||(n[2]=e=>o.responseChanged(e))},null,40,j),[[r]]),(0,i.Lk)("p",D,(0,i.v_)(e.$t("hint-number-input")),1)],64)):"email"===t.options.input_type?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.bo)((0,i.Lk)("input",{type:"email",name:t.qid,maxlength:o.getMaxLength,onChange:n[3]||(n[3]=e=>o.responseChanged(e))},null,40,N),[[l]]),(0,i.Lk)("p",Z,(0,i.v_)(e.$t("hint-invalid-email")),1),(0,i.Lk)("p",B,(0,i.v_)(e.$t("hint-email-input")),1)],64)):(0,i.Q3)("",!0)],8,z)])}var J={name:"OpenQuestion",props:["qid","text","options"],emits:["responseChanged"],data:function(){return{response:"-99"}},computed:{getMaxLength(){return null!==this.options.max_input_length?this.options.max_input_length:void 0}},created(){this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})},methods:{responseChanged(e){""===e.target.value||null===e.target.value?this.response="-99":this.response=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})}},directives:{onlyDigits:{mounted(e){e.addEventListener("input",(function(){e.value=e.value.replace(/\D/g,"")}))}},validEmail:{mounted(e){e.addEventListener("blur",(function(){const n=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,t=e.nextElementSibling;n.test(e.value)?(e.classList.remove("invalid-email"),t&&t.classList.contains("hint-invalid-input")&&(t.style.display="none")):(e.classList.add("invalid-email"),t&&t.classList.contains("hint-invalid-input")&&(t.style.display="block"))})),e.addEventListener("focus",(function(){const n=e.nextElementSibling;n&&n.classList.contains("hint-invalid-input")&&(n.style.display="none")}))}}}};const G=(0,T.A)(J,[["render",U],["__scopeId","data-v-002c6744"]]);var W=G;const V=["innerHTML"],Y={class:"mq-table"},ee={class:"mq-header"},ne=(0,i.Lk)("th",null,null,-1),te=["innerHTML"],ie=["id"],se=["innerHTML"],ae=["name","value"],oe=["innerHTML"];function re(e,n,t,s,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,V),(0,i.Lk)("table",Y,[(0,i.Lk)("thead",ee,[(0,i.Lk)("tr",null,[ne,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.scale,((e,n)=>((0,i.uX)(),(0,i.CE)("th",{key:n,innerHTML:e.label},null,8,te)))),128))])]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,((e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:s,id:"answer-item-"+e.id},[(0,i.Lk)("td",{class:"mq-table-td-item",innerHTML:e.label},null,8,se),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.scale,((t,s)=>((0,i.uX)(),(0,i.CE)("td",{key:s,class:(0,i.C4)(["mq-table-td-input",{"border-start":t.add_border,"border-secondary":t.add_border}])},[(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"radio",name:e.id,value:t.value,onChange:n[0]||(n[0]=e=>o.responseChanged(e))},null,40,ae),(0,i.Lk)("span",{class:"ps-2 d-sm-none",innerHTML:t.label},null,8,oe)])],2)))),128))],8,ie)))),128))])])])}var le={name:"MatrixQuestion",props:["qid","text","items","scale"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const ue=(0,T.A)(le,[["render",re]]);var de=ue;const he=["innerHTML"],ce={class:"question-response-body"},pe={class:"dq-table"},me=(0,i.Lk)("th",null,null,-1),ge=["innerHTML"],qe=(0,i.Lk)("th",null,null,-1),ve=["id"],be=["innerHTML"],fe=["name","value"],Ce=["innerHTML"];function Le(e,n,t,s,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,he),(0,i.Lk)("div",ce,[(0,i.Lk)("table",pe,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[me,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.scale,((e,n)=>((0,i.uX)(),(0,i.CE)("th",{key:n,innerHTML:e.label},null,8,ge)))),128)),qe])]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,((e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:s,id:"answer-item-"+e.id},[(0,i.Lk)("td",{class:"mq-table-td-item dq-table-td-item-left",innerHTML:e.label},null,8,be),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.scale,((t,s)=>((0,i.uX)(),(0,i.CE)("td",{key:s,class:"dq-table-td-input"},[(0,i.Lk)("label",null,[(0,i.Lk)("input",{type:"radio",name:e.id,value:t.value,onChange:n[0]||(n[0]=e=>o.responseChanged(e))},null,40,fe)])])))),128)),(0,i.Lk)("td",{class:"mq-table-td-item dq-table-td-item-right",innerHTML:e.label_alt},null,8,Ce)],8,ve)))),128))])])])])}var ke={name:"SemanticDifferential",props:["qid","text","items","scale"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const xe=(0,T.A)(ke,[["render",Le]]);var ye=xe;const Ee=["innerHTML"];function Me(e,n,t,s,a,o){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",{innerHTML:t.text},null,8,Ee)])}var Te={name:"TransitionQuestion",props:["qid","text"],emits:["responseChanged"],created(){this.$emit("responseChanged",{id:this.qid,response:null,question:this.text,items:null})}};const _e=(0,T.A)(Te,[["render",Me]]);var Xe=_e,we={name:"QApp",components:{SingleChoiceQuestion:X,MultiChoiceQuestion:P,OpenQuestion:W,MatrixQuestion:de,SemanticDifferential:ye,TransitionQuestion:Xe},props:{questionnaireConfig:String,actionUrl:String,language:String},data(){return this.$i18n.locale=this.language,{parsedQuestConfig:JSON.parse(this.questionnaireConfig),responses:{},currentPage:1,minPage:1,maxPage:1,locale:this.language,displayedRequiredHint:!1}},created(){this.setMaxPage(),this.currentPage=this.minPage},watch:{locale(e){this.$i18n.locale=e}},methods:{scrollToTop(){this.$nextTick((()=>{setTimeout((()=>{document.documentElement.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0}),100)}))},updateResponses(e){this.responses[e.id]={response:e.response,question:e.question,items:e.items}},setMaxPage(){let e=[];this.parsedQuestConfig.forEach((n=>e.push(n.page))),this.minPage=Math.min(...e),this.maxPage=Math.max(...e)},next(){(this.displayedRequiredHint||this.checkRequired())&&(this.currentPage===this.maxPage?this.submitData():(this.currentPage+=1,null===document.querySelector("[data-page-index='"+this.currentPage+"']")&&this.next()))},getActiveQuestions(){let e=[];return this.parsedQuestConfig.forEach((n=>{this.currentPage===n.page&&e.push(n)})),e},checkRequired(){let e=[],n=new Set;return this.getActiveQuestions().forEach((t=>{if(document.querySelectorAll("div[id*=answer-], tr[id*=answer-]").forEach((e=>e.classList.remove("required-but-missing"))),document.querySelectorAll("div[class*=required-hint]").forEach((e=>e.classList.remove("show"))),t.required){let i=this.responses[t.question].response;if(i instanceof Object)for(let s in i)-99!==i[s]&&"-99"!==i[s]||(e.push("item-"+s),n.add(t.question));else-99!==i&&"-99"!==i||(e.push(t.question),n.add(t.question))}})),0===e.length||(e.forEach((e=>{let n="answer-"+e;document.getElementById(n).classList.add("required-but-missing")})),n.forEach((e=>{document.getElementById("required-hint-"+e).classList.add("show")})),this.displayedRequiredHint=!0,!1)},submitData(){let e=new FormData;e.append("post_data",JSON.stringify(this.responses));let n=document.querySelector("input[name='csrfmiddlewaretoken']");e.append("csrfmiddlewaretoken",n.value),fetch(this.actionUrl,{method:"POST",body:e}).then((e=>{e.redirected&&(window.location.href=e.url)})).catch((e=>{console.info(e)}))}}};function He(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{"next-btn-label":e=>{const{normalize:n}=e;return n(["Next"])},"required-but-missing-hint":e=>{const{normalize:n}=e;return n(["Please answer this question."])},"hint-number-input":e=>{const{normalize:n}=e;return n(["Only numbers are allowed."])},"hint-email-input":e=>{const{normalize:n}=e;return n(["Enter email address in the format name","@","domain.com."])},"hint-invalid-email":e=>{const{normalize:n}=e;return n(["This is not a valid email pattern."])}},de:{"next-btn-label":e=>{const{normalize:n}=e;return n(["Weiter"])},"required-but-missing-hint":e=>{const{normalize:n}=e;return n(["Bitte beantworten Sie diese Frage."])},"hint-number-input":e=>{const{normalize:n}=e;return n(["Es sind nur Zahlen erlaubt."])},"hint-email-input":e=>{const{normalize:n}=e;return n(["E-Mail-Adresse im Format name","@","domain.de eingeben."])},"hint-invalid-email":e=>{const{normalize:n}=e;return n(["Das scheint keine gültige E-Mail-Adresse zu sein."])}}}})}"function"===typeof He&&He(we);const Qe=(0,T.A)(we,[["render",f]]);var Se=Qe,$e=t(6992);const Re=new $e.hU({fallbackLocale:"en"}),Fe="#qapp",Oe=document.querySelector(Fe),Pe=(0,i.Ef)(Se,{...Oe.dataset});Pe.use(Re),Pe.mount(Fe)}},n={};function t(i){var s=n[i];if(void 0!==s)return s.exports;var a=n[i]={exports:{}};return e[i].call(a.exports,a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(n,i,s,a){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],a=e[d][2];for(var r=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(t.O).every((function(e){return t.O[e](i[l])}))?i.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(d--,1);var u=s();void 0!==u&&(n=u)}}return n}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,s,a]}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.j=307}(),function(){var e={307:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var s,a,o=i[0],r=i[1],l=i[2],u=0;if(o.some((function(n){return 0!==e[n]}))){for(s in r)t.o(r,s)&&(t.m[s]=r[s]);if(l)var d=l(t)}for(n&&n(i);u<o.length;u++)a=o[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},i=self["webpackChunkddm_vue_frontend"]=self["webpackChunkddm_vue_frontend"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],(function(){return t(5320)}));i=t.O(i)})();
//# sourceMappingURL=vue_questionnaire.js.map