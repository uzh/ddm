(function(){"use strict";var e={317:function(e,t,i){var n=i(3864);const s=["data-page-index","data-question-id"],o={key:0,class:"question-container"},a=["id"],l={key:1,class:"question-container"},r=["id"],d={key:2,class:"question-container"},u=["id"],c={key:3,class:"question-container"},h=["id"],p={key:4,class:"question-container"},m=["id"],g={key:5,class:"question-container"},v=["id"],b={class:"row flow-navigation"},f={class:"col"};function q(e,t,i,q,C,y){const L=(0,n.g2)("SingleChoiceQuestion"),x=(0,n.g2)("MultiChoiceQuestion"),k=(0,n.g2)("OpenQuestion"),E=(0,n.g2)("MatrixQuestion"),w=(0,n.g2)("SemanticDifferential"),_=(0,n.g2)("TransitionQuestion");return(0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(C.parsedQuestConfig,(t=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:t.question,"data-page-index":t.page,"data-question-id":t.question,ref_for:!0,ref:"questionDivs",class:"question-app-container"},["single_choice"===t.type?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(L,{qid:t.question,text:t.text,items:t.items,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,a)])):(0,n.Q3)("",!0),"multi_choice"===t.type?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(x,{qid:t.question,text:t.text,items:t.items,required:t.required,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","required","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,r)])):(0,n.Q3)("",!0),"open"===t.type?((0,n.uX)(),(0,n.CE)("div",d,[(0,n.bF)(k,{qid:t.question,text:t.text,options:t.options,items:t.items,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","options","items","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,u)])):(0,n.Q3)("",!0),"matrix"===t.type?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(E,{qid:t.question,text:t.text,items:t.items,scale:t.scale,options:t.options,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","options","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,h)])):(0,n.Q3)("",!0),"semantic_diff"===t.type?((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(w,{qid:t.question,text:t.text,items:t.items,scale:t.scale,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","items","scale","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,m)])):(0,n.Q3)("",!0),"transition"===t.type?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(_,{qid:t.question,text:t.text,hideObjectDict:this.hideObjectDict,onResponseChanged:y.updateResponses,class:"question-body"},null,8,["qid","text","hideObjectDict","onResponseChanged"]),(0,n.Lk)("div",{id:"required-hint-"+t.question,class:"required-hint hidden"},(0,n.v_)(e.$t("required-but-missing-hint")),9,v)])):(0,n.Q3)("",!0)],8,s)),[[n.aG,C.currentPage===t.page&&!C.hideObjectDict["question-"+t.question]]]))),128)),(0,n.Lk)("div",b,[(0,n.Lk)("div",f,[(0,n.Lk)("button",{class:"flow-btn",type:"button",onClick:t[0]||(t[0]=e=>(y.next(),y.scrollToTop()))},(0,n.v_)(e.$t("next-btn-label"))+"  ›",1)])])],64)}i(4114),i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698),i(8992),i(4520),i(3949);const C=["innerHTML"],y=["id"],L=["id","dataid","name","value"],x=["for"],k=["innerHTML"];function E(e,t,i,s,o,a){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"question-text",innerHTML:i.text},null,8,C),(0,n.Lk)("div",{id:"answer-"+i.qid,class:"response-body question-response-body item-container"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.items,((e,s)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:s,class:"question-item"},[(0,n.Lk)("input",{class:"form-check-input",type:"radio",id:"q-"+this.qid+"-"+e.id,dataid:i.qid,name:"q-"+i.qid,value:e.value,onChange:t[0]||(t[0]=e=>a.responseChanged(e))},null,40,L),(0,n.Lk)("label",{for:"q-"+this.qid+"-"+e.id,class:"item-label"},[(0,n.Lk)("span",{innerHTML:e.label},null,8,k)],8,x)])),[[n.aG,!i.hideObjectDict["item-"+e.id]]]))),128))],8,y)])}var w={name:"SingleChoiceQuestion",props:["qid","text","items","hideObjectDict"],emits:["responseChanged"],data:function(){return{response:""}},created(){this.response=-99,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}},_=i(6262);const O=(0,_.A)(w,[["render",E],["__scopeId","data-v-5ae1d045"]]);var M=O;const T=e=>((0,n.Qi)("data-v-73eee4cf"),e=e(),(0,n.jt)(),e),S=["innerHTML"],D={class:"response-body question-response-body item-container"},j=["id","name","value"],H=["for"],X=T((()=>(0,n.Lk)("span",{class:"span-check-icon"},"✓",-1))),Q=["innerHTML"];function F(e,t,i,s,o,a){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"question-text",innerHTML:i.text},null,8,S),(0,n.Lk)("div",D,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.items,((e,s)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:s,class:"question-item"},[(0,n.Lk)("input",{class:"item-check",type:"checkbox",id:"q-"+this.qid+"-"+e.id,name:e.id,value:e.value,onChange:t[0]||(t[0]=e=>a.responseChanged(e))},null,40,j),(0,n.Lk)("label",{for:"q-"+this.qid+"-"+e.id,class:"item-label"},[X,(0,n.Lk)("span",{innerHTML:e.label},null,8,Q)],8,H)])),[[n.aG,!i.hideObjectDict["item-"+e.id]]]))),128))])])}var R={name:"MultiChoiceQuestion",props:["qid","text","items","hideObjectDict"],emits:["responseChanged"],data:function(){return{response:{}}},created(){this.items.forEach((e=>{this.response[e.id]=!1})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},methods:{responseChanged(e){this.response[e.target.name]=e.target.checked,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})}}};const $=(0,_.A)(R,[["render",F],["__scopeId","data-v-73eee4cf"]]);var A=$;const I=["innerHTML"],P=["id"],z=["name","maxlength"],K=["name","maxlength"],B=["name","maxlength"],V={class:"input-hint"},N=["name","maxlength"],G={class:"input-hint hint-invalid-input pb-0 mb-0"},W={class:"input-hint"},Y=["id"],Z=["id"],J=["innerHTML"],U=["name","maxlength"],ee=["name","maxlength"],te=["name","maxlength"],ie={class:"input-hint"},ne=["name","maxlength"],se={class:"input-hint hint-invalid-input pb-0 mb-0"},oe={class:"input-hint"};function ae(e,t,i,s,o,a){const l=(0,n.gN)("only-digits"),r=(0,n.gN)("valid-email");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"question-text",innerHTML:i.text},null,8,I),this.options.multi_item_response?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,id:"answer-"+i.qid,class:"response-body"},["text"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["small"===i.options.display?((0,n.uX)(),(0,n.CE)("input",{key:0,class:"oq-input",type:"text",name:i.qid,maxlength:a.getMaxLength,onChange:t[0]||(t[0]=e=>a.responseChanged(e))},null,40,z)):(0,n.Q3)("",!0),"large"===i.options.display?((0,n.uX)(),(0,n.CE)("textarea",{key:1,class:"open-question-textarea",type:"text",name:i.qid,maxlength:a.getMaxLength,onChange:t[1]||(t[1]=e=>a.responseChanged(e))},null,40,K)):(0,n.Q3)("",!0)],64)):"numbers"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"oq-input",name:i.qid,maxlength:a.getMaxLength,onChange:t[2]||(t[2]=e=>a.responseChanged(e))},null,40,B),[[l]]),(0,n.Lk)("p",V,(0,n.v_)(e.$t("hint-number-input")),1)],64)):"email"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.bo)((0,n.Lk)("input",{type:"email",class:"oq-input",name:i.qid,maxlength:a.getMaxLength,onChange:t[3]||(t[3]=e=>a.responseChanged(e))},null,40,N),[[r]]),(0,n.Lk)("p",G,(0,n.v_)(e.$t("hint-invalid-email")),1),(0,n.Lk)("p",W,(0,n.v_)(e.$t("hint-email-input")),1)],64)):(0,n.Q3)("",!0)],8,P)),this.options.multi_item_response?((0,n.uX)(),(0,n.CE)("div",{key:1,id:"answer-"+i.qid,class:"response-body"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.items,((s,o)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{id:"answer-item-"+s.id,class:"input-row"},[(0,n.Lk)("div",{innerHTML:s.label},null,8,J),(0,n.Lk)("div",null,["text"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},["small"===i.options.display?((0,n.uX)(),(0,n.CE)("input",{key:0,class:"oq-input",type:"text",name:s.id,maxlength:a.getMaxLength,onChange:t[4]||(t[4]=e=>a.responseChanged(e))},null,40,U)):(0,n.Q3)("",!0),"large"===i.options.display?((0,n.uX)(),(0,n.CE)("textarea",{key:1,class:"open-question-textarea",type:"text",name:s.id,maxlength:a.getMaxLength,onChange:t[5]||(t[5]=e=>a.responseChanged(e))},null,40,ee)):(0,n.Q3)("",!0)],64)):"numbers"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.bo)((0,n.Lk)("input",{type:"text",class:"oq-input",name:s.id,maxlength:a.getMaxLength,onChange:t[6]||(t[6]=e=>a.responseChanged(e))},null,40,te),[[l]]),(0,n.Lk)("p",ie,(0,n.v_)(e.$t("hint-number-input")),1)],64)):"email"===i.options.input_type?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[(0,n.bo)((0,n.Lk)("input",{type:"email",class:"oq-input",name:s.id,maxlength:a.getMaxLength,onChange:t[7]||(t[7]=e=>a.responseChanged(e))},null,40,ne),[[r]]),(0,n.Lk)("p",se,(0,n.v_)(e.$t("hint-invalid-email")),1),(0,n.Lk)("p",oe,(0,n.v_)(e.$t("hint-email-input")),1)],64)):(0,n.Q3)("",!0)])],8,Z)),[[n.aG,!i.hideObjectDict["item-"+s.id]]]))),256))],8,Y)):(0,n.Q3)("",!0)])}var le={name:"OpenQuestion",props:["qid","text","options","items","hideObjectDict"],emits:["responseChanged"],data:function(){return{response:this.options.max_input_length?{}:"-99"}},computed:{getMaxLength(){return null!==this.options.max_input_length?this.options.max_input_length:void 0}},created(){this.options.multi_item_response?this.items.forEach((e=>{this.response[e.id]="-99"})):this.response="-99",this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})},methods:{getValue(e){return""===e.target.value||null===e.target.value?"-99":e.target.value},responseChanged(e){this.options.multi_item_response?this.response[e.target.name]=this.getValue(e):this.response=this.getValue(e),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:null})}},directives:{onlyDigits:{mounted(e){e.addEventListener("input",(function(){e.value=e.value.replace(/\D/g,"")}))}},validEmail:{mounted(e){e.addEventListener("blur",(function(){const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,i=e.nextElementSibling;t.test(e.value)?(e.classList.remove("invalid-email"),i&&i.classList.contains("hint-invalid-input")&&(i.style.display="none")):(e.classList.add("invalid-email"),i&&i.classList.contains("hint-invalid-input")&&(i.style.display="block"))})),e.addEventListener("focus",(function(){const t=e.nextElementSibling;t&&t.classList.contains("hint-invalid-input")&&(t.style.display="none")}))}}}};const re=(0,_.A)(le,[["render",ae],["__scopeId","data-v-55a7e37e"]]);var de=re;const ue=["innerHTML"],ce={class:"response-body ps-0 pe-0"},he=["id"],pe=["innerHTML"],me={class:"mq-item-container"},ge={key:0,class:"heading-container"},ve=["innerHTML"],be={class:"scale-container scale-heading-container"},fe={class:"scale-label scale-label-mockup"},qe=["innerHTML"],Ce=["innerHTML"],ye={class:"scale-container scale-input-container"},Le=["id","name","value"],xe=["for"],ke=["innerHTML"];function Ee(e,t,i,s,o,a){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"question-text",innerHTML:i.text},null,8,ue),(0,n.Lk)("div",ce,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.items,((e,s)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:s,class:"response-row",id:"answer-item-"+e.id},[(0,n.Lk)("div",{class:(0,n.C4)(["item-separate-line",{show:i.scale.length>7}]),innerHTML:e.label},null,10,pe),(0,n.Lk)("div",me,[i.options.show_scale_headings?((0,n.uX)(),(0,n.CE)("div",ge,[(0,n.Lk)("div",{class:(0,n.C4)(["item-label-container item-label-placeholder",{hidden:i.scale.length>7}]),innerHTML:e.label},null,10,ve),(0,n.Lk)("div",be,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.scale,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:(0,n.C4)(["scale-label-container",{"main-scale":!e.secondary_point,"secondary-scale":e.secondary_point}])},[(0,n.Lk)("div",fe,[(0,n.Lk)("span",{class:"scale-label-span",innerHTML:e.heading_label},null,8,qe)])],2)))),128))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,n.C4)(["response-container",{"border-bottom-light":i.scale.length<7}])},[(0,n.Lk)("div",{class:(0,n.C4)(["item-label-container",{hidden:i.scale.length>7}]),innerHTML:e.label},null,10,Ce),(0,n.Lk)("div",ye,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.scale,((i,s)=>((0,n.uX)(),(0,n.CE)("div",{key:s,class:(0,n.C4)(["scale-label-container",{"main-scale":!i.secondary_point,"secondary-scale":i.secondary_point}])},[(0,n.Lk)("input",{type:"radio",id:this.qid+"-"+e.id+"-"+i.value,name:e.id,value:i.value,onChange:t[0]||(t[0]=e=>a.responseChanged(e)),onClick:t[1]||(t[1]=e=>a.scrollToNext(e))},null,40,Le),(0,n.Lk)("label",{for:this.qid+"-"+e.id+"-"+i.value,class:(0,n.C4)(["scale-label",{"main-label":!i.secondary_point}])},[(0,n.Lk)("span",{class:"scale-label-span",innerHTML:i.input_label},null,8,ke)],10,xe)],2)))),128))])],2)])],8,he)),[[n.aG,!i.hideObjectDict["item-"+e.id]]]))),128))])])}var we={name:"MatrixQuestion",props:["qid","text","items","scale","options","hideObjectDict"],emits:["responseChanged"],data:function(){return{response:{},shouldScroll:window.innerWidth<=768}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},mounted(){window.addEventListener("resize",this.updateScrollSetting),window.addEventListener("scroll",this.updateMostVisibleRow),window.addEventListener("load",this.updateMostVisibleRow),window.addEventListener("resize",this.updateMostVisibleRow),this.addClasses()},beforeDestroy(){window.removeEventListener("resize",this.updateScrollSetting),window.removeEventListener("scroll",this.updateMostVisibleRow),window.removeEventListener("load",this.updateMostVisibleRow),window.removeEventListener("resize",this.updateMostVisibleRow)},methods:{updateScrollSetting(){this.shouldScroll=window.innerWidth<=768},updateMostVisibleRow(){let e=Array.from(document.querySelectorAll(".response-row")),t=null,i=1/0;this.shouldScroll?(e.forEach((e=>{let n=e.getBoundingClientRect(),s=this.getHeightOfLastQuestionTextBefore(e),o=Math.abs(n.top);n.bottom>0&&n.top<window.innerHeight&&n.top>=.25*s&&o<i&&(i=o,t=e)})),e.forEach((e=>e.style.opacity="0.3")),t&&(t.style.opacity="1")):e.forEach((e=>e.style.opacity="1"))},getHeightOfLastQuestionTextBefore(e){let t=e.closest(".question-body");if(!t)return null;const i=t.querySelector(".question-text");return i?i.offsetHeight:0},responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},scrollToNext(e){const t=e.target.closest("div.response-row");if(t){const e=t.nextElementSibling;if(e){const i=this.getHeightOfLastQuestionTextBefore(t),n=e.getBoundingClientRect().top+window.scrollY,s=n-i;window.scrollTo({top:s,behavior:"smooth"})}else if(null===e){let e=t.closest(".question-app-container"),i=e.nextElementSibling;if(i){const e=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:e,behavior:"smooth"})}}}},addClasses(){const e=document.querySelectorAll(".scale-container");e.forEach((e=>{const t=e.querySelectorAll(".main-scale");t.length>0&&(t.forEach((e=>{e.classList.remove("main-scale-first","main-scale-last")})),t[0].classList.add("main-scale-first"),t.length>1&&t[t.length-1].classList.add("main-scale-last"))}))}}};const _e=(0,_.A)(we,[["render",Ee],["__scopeId","data-v-6fc63fb8"]]);var Oe=_e;const Me=["innerHTML"],Te={class:"response-body"},Se=["id"],De=["innerHTML"],je={class:"scale-container"},He=["id","name","value"],Xe=["for"],Qe=["innerHTML"],Fe=["innerHTML"],Re={class:"scale-container scale-container-secondary"},$e=["id","name","value"],Ae=["for"],Ie=["innerHTML"];function Pe(e,t,i,s,o,a){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"question-text",innerHTML:i.text},null,8,Me),(0,n.Lk)("div",Te,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.items,((e,s)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("div",{key:s,id:"answer-item-"+e.id,class:"item-container response-row"},[(0,n.Lk)("div",{class:"item-label-container item-label-start",innerHTML:e.label},null,8,De),(0,n.Lk)("div",je,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.scale,((i,s)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[i.secondary_point?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:s,class:"scale-label-container main-scale"},[(0,n.Lk)("input",{type:"radio",id:this.qid+"-"+e.id+"-"+i.value,name:e.id,value:i.value,onChange:t[0]||(t[0]=e=>a.responseChanged(e)),onClick:t[1]||(t[1]=e=>a.scrollToNext(e))},null,40,He),(0,n.Lk)("label",{for:this.qid+"-"+e.id+"-"+i.value,class:(0,n.C4)(["scale-label",{"main-label":!i.secondary_point}])},[(0,n.Lk)("span",{class:"scale-label-span",innerHTML:i.input_label},null,8,Qe)],10,Xe)]))],64)))),256))]),(0,n.Lk)("div",{class:"item-label-container",innerHTML:e.label_alt},null,8,Fe),(0,n.Lk)("div",Re,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.scale,((i,s)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[i.secondary_point?((0,n.uX)(),(0,n.CE)("div",{key:s,class:"scale-label-container secondary-scale"},[(0,n.Lk)("input",{type:"radio",id:this.qid+"-"+e.id+"-"+i.value,name:e.id,value:i.value,onChange:t[2]||(t[2]=e=>a.responseChanged(e))},null,40,$e),(0,n.Lk)("label",{for:this.qid+"-"+e.id+"-"+i.value,class:(0,n.C4)(["scale-label",{"main-label":!i.secondary_point}])},[(0,n.Lk)("span",{class:"scale-label-span",innerHTML:i.input_label},null,8,Ie)],10,Ae)])):(0,n.Q3)("",!0)],64)))),256))])],8,Se)),[[n.aG,!i.hideObjectDict["item-"+e.id]]]))),128))])])}var ze={name:"SemanticDifferential",props:["qid","text","items","scale","hideObjectDict"],emits:["responseChanged"],data:function(){return{response:{},shouldScroll:window.innerWidth<=768}},created(){this.items.forEach((e=>{this.response[e.id]=-99})),this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},mounted(){window.addEventListener("resize",this.updateScrollSetting),this.addClasses()},beforeDestroy(){window.removeEventListener("resize",this.updateScrollSetting)},methods:{updateScrollSetting(){this.shouldScroll=window.innerWidth<=768},responseChanged(e){this.response[e.target.name]=e.target.value,this.$emit("responseChanged",{id:this.qid,response:this.response,question:this.text,items:this.items})},getHeightOfLastQuestionTextBefore(e){let t=e.closest(".question-body");if(!t)return null;const i=t.querySelector(".question-text");return i?i.offsetHeight:0},scrollToNext(e){const t=event.target.closest("div.response-row");if(t){const e=t.nextElementSibling;if(e){const i=this.getHeightOfLastQuestionTextBefore(t),n=e.getBoundingClientRect().top+window.scrollY,s=n-i;window.scrollTo({top:s,behavior:"smooth"})}else if(null===e){let e=t.closest(".question-app-container"),i=e.nextElementSibling;if(i){const e=i.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:e,behavior:"smooth"})}}}},addClasses(){const e=document.querySelectorAll(".item-container");e.forEach((e=>{const t=e.querySelectorAll(".main-scale");t.length>0&&(t.forEach((e=>{e.classList.remove("main-scale-first","main-scale-last")})),t[0].classList.add("main-scale-first"),t.length>1&&t[t.length-1].classList.add("main-scale-last"))}))}}};const Ke=(0,_.A)(ze,[["render",Pe],["__scopeId","data-v-970247fc"]]);var Be=Ke;const Ve={class:"question-text"},Ne=["innerHTML"];function Ge(e,t,i,s,o,a){return(0,n.uX)(),(0,n.CE)("div",Ve,[(0,n.Lk)("div",{innerHTML:i.text},null,8,Ne)])}var We={name:"TransitionQuestion",props:["qid","text"],emits:["responseChanged"],created(){this.$emit("responseChanged",{id:this.qid,response:null,question:this.text,items:null})}};const Ye=(0,_.A)(We,[["render",Ge]]);var Ze=Ye;function Je(e,t,i){switch(i){case"==":return e==t;case"!=":return e!=t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t;case"contains":return String(value_left).includes(String(value_right));case"contains_not":return!String(value_left).includes(String(value_right));default:throw new Error(`Invalid operator: ${i}`)}}function Ue(e){let t=[],i=0;while(i<e.length)if("AND"===e[i]){let n=t.pop(),s=e[i+1];t.push(n&&s),i+=2}else t.push(e[i]),i++;return t.reduce(((e,t)=>e||t))}var et={name:"QApp",components:{SingleChoiceQuestion:M,MultiChoiceQuestion:A,OpenQuestion:de,MatrixQuestion:Oe,SemanticDifferential:Be,TransitionQuestion:Ze},props:{questionnaireConfig:String,filterConfig:String,actionUrl:String,language:String},data(){return this.$i18n.locale=this.language,{parsedQuestConfig:JSON.parse(this.questionnaireConfig),parsedFilterConfig:JSON.parse(this.filterConfig),responses:{},responsesForFilters:{},hideObjectDict:{},currentPage:1,minPage:1,maxPage:1,locale:this.language,displayedRequiredHint:!1}},created(){this.setMaxPage(),this.currentPage=this.minPage},watch:{locale(e){this.$i18n.locale=e}},methods:{scrollToTop(){this.$nextTick((()=>{setTimeout((()=>{document.documentElement.scrollTo({top:0,behavior:"smooth"}),document.documentElement.scrollTop=0,document.body.scrollTop=0}),100)}))},updateResponses(e){this.responses[e.id]={response:e.response,question:e.question,items:e.items},null!=e.response&&(this.updateFilterResponses(e),this.evaluateFilters(),this.checkIfAllItemsHidden(e))},updateFilterResponses(e){let t="item-",i="question-";if(null!=e.items)Object.entries(e.response).forEach((([e,i])=>{let n=`${t}${e}`;this.responsesForFilters[n]=i}));else{let t=`${i}${e.id}`;this.responsesForFilters[t]=e.response}},evaluateFilters(){Object.entries(this.parsedFilterConfig).forEach((([e,t])=>{if(0===t.length)return void(this.hideObjectDict[e]=!1);let i=[],n=!0;t.forEach((e=>{let t=this.responsesForFilters[e.source],s=Je(t,e.condition_value,e.condition_operator);n?n=!1:i.push(e.combinator),i.push(s)})),i.length>0?this.hideObjectDict[e]=Ue(i):this.hideObjectDict[e]=i[0]}))},checkIfAllItemsHidden(){Object.entries(this.responses).forEach((([e,t])=>{let i=`question-${e}`,n=t.items,s=!0;null!==n&&(Object.entries(n).forEach((([e,t])=>{let i=`item-${t.id}`;!1===this.hideObjectDict[i]&&(s=!1)})),s&&(this.hideObjectDict[i]=!0))}))},setMaxPage(){let e=[];this.parsedQuestConfig.forEach((t=>e.push(t.page))),this.minPage=Math.min(...e),this.maxPage=Math.max(...e)},next(){if(this.displayedRequiredHint||this.checkRequired()){if(this.currentPage===this.maxPage)return void this.submitData();this.currentPage+=1;while(!this.pageIsValid())if(this.currentPage+=1,this.currentPage>this.maxPage)return}},pageIsValid(){const e=(Array.isArray(this.$refs.questionDivs)?this.$refs.questionDivs:[this.$refs.questionDivs]).filter((e=>e.getAttribute("data-page-index")===String(this.currentPage)));if(0===e.length)return!1;let t=!0;return e.forEach((e=>{let i=e.getAttribute("data-question-id");!1===this.hideObjectDict["question-"+i]&&(t=!1)})),!t},getActiveQuestions(){let e=[];return this.parsedQuestConfig.forEach((t=>{this.currentPage===t.page&&e.push(t)})),e},checkRequired(){let e=[],t=new Set;return this.getActiveQuestions().forEach((i=>{if(document.querySelectorAll("div[id*=answer-], tr[id*=answer-]").forEach((e=>e.classList.remove("required-but-missing"))),document.querySelectorAll("div[class*=required-hint]").forEach((e=>e.classList.remove("show"))),i.required){let n=this.responses[i.question].response;if(n instanceof Object)for(let s in n)-99!==n[s]&&"-99"!==n[s]||this.hideObjectDict["item-"+s]||(e.push("item-"+s),t.add(i.question));else-99!==n&&"-99"!==n||this.hideObjectDict["question-"+i.question]||(e.push(i.question),t.add(i.question))}})),0===e.length||(e.forEach((e=>{let t="answer-"+e;document.getElementById(t).classList.add("required-but-missing")})),t.forEach((e=>{document.getElementById("required-hint-"+e).classList.add("show")})),this.displayedRequiredHint=!0,!1)},submitData(){let e=new FormData;e.append("post_data",JSON.stringify(this.responses));let t=document.querySelector("input[name='csrfmiddlewaretoken']");e.append("csrfmiddlewaretoken",t.value),fetch(this.actionUrl,{method:"POST",body:e}).then((e=>{e.redirected&&(window.location.href=e.url)})).catch((e=>{console.info(e)}))}}};function tt(e){e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{"next-btn-label":e=>{const{normalize:t}=e;return t(["Next"])},"required-but-missing-hint":e=>{const{normalize:t}=e;return t(["Please answer this question."])},"hint-number-input":e=>{const{normalize:t}=e;return t(["Only numbers are allowed."])},"hint-email-input":e=>{const{normalize:t}=e;return t(["Enter email address in the format name","@","domain.com."])},"hint-invalid-email":e=>{const{normalize:t}=e;return t(["This is not a valid email pattern."])}},de:{"next-btn-label":e=>{const{normalize:t}=e;return t(["Weiter"])},"required-but-missing-hint":e=>{const{normalize:t}=e;return t(["Bitte beantworten Sie diese Frage."])},"hint-number-input":e=>{const{normalize:t}=e;return t(["Es sind nur Zahlen erlaubt."])},"hint-email-input":e=>{const{normalize:t}=e;return t(["E-Mail-Adresse im Format name","@","domain.de eingeben."])},"hint-invalid-email":e=>{const{normalize:t}=e;return t(["Das scheint keine gültige E-Mail-Adresse zu sein."])}}}})}"function"===typeof tt&&tt(et);const it=(0,_.A)(et,[["render",q]]);var nt=it,st=i(6992);const ot=new st.hU({fallbackLocale:"en"}),at="#qapp",lt=document.querySelector(at),rt=(0,n.Ef)(nt,{...lt.dataset});rt.use(ot),rt.mount(at)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,n,s,o){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],o=e[u][2];for(var l=!0,r=0;r<n.length;r++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](n[r])}))?n.splice(r--,1):(l=!1,o<a&&(a=o));if(l){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,s,o]}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.j=307}(),function(){var e={307:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,o,a=n[0],l=n[1],r=n[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(r)var u=r(i)}for(t&&t(n);d<a.length;d++)o=a[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},n=self["webpackChunkddm_vue_frontend"]=self["webpackChunkddm_vue_frontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(317)}));n=i.O(n)})();
//# sourceMappingURL=vue_questionnaire.js.map