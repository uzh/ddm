<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DDM | Data Encryption</title>
    <link rel="prev" href="documentation.html">
    <link rel="next" href="internationalization.html">
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
    <link rel="icon" href="../../../../_/img/ddl_favicon_black.svg" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div>
        <a class="navbar-item"><img src="../../../../_/img/DDM_Logo_Schwarz.svg" height="50px"></a>
      </div>
      <div class="navbar-slogan">
        <a class="navbar-item">Data Donation Module Documentation</a>
      </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <!--
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ddm" data-version="main">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <!-- 
    <h3 class="title"><a href="../../index.html">DDM</a></h3>
     -->
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-link-1" href="../../index.html"><strong>DDM Documentation</strong></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle nav-item-toggle-level-1"></button>
    <a class="nav-link nav-link-1" href="../../researchers/index.html">Researchers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-link-2" href="../../researchers/create_project.html">Create a Project</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-link-2" href="../../researchers/project_hub.html">Project Hub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-link-2" href="../../researchers/general_project_settings.html">General Project Settings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle nav-item-toggle-level-2"></button>
    <a class="nav-link nav-link-2" href="../../researchers/project_configuration/index.html">Project Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/project_configuration/briefing.html">Briefing Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle nav-item-toggle-level-3"></button>
    <span class="nav-text nav-text-3">Data Donation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link nav-link-4" href="../../researchers/project_configuration/datadonation/datadonation_overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link nav-link-4" href="../../researchers/project_configuration/datadonation/datadonation_configuration.html">Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle nav-item-toggle-level-3"></button>
    <span class="nav-text nav-text-3">Questionnaire</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link nav-link-4" href="../../researchers/project_configuration/questionnaire/questionnaire_overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link nav-link-4" href="../../researchers/project_configuration/questionnaire/questionnaire_configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link nav-link-4" href="../../researchers/project_configuration/questionnaire/questionnaire_data_integration.html">Data Integration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/project_configuration/debriefing.html">Debriefing Page</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle nav-item-toggle-level-2"></button>
    <a class="nav-link nav-link-2" href="../../researchers/data_center.html">Data Center</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/data_center/data_download.html">Download</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/data_center/project_logs.html">Project Logs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/data_center/participation_statistics.html">Statistics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-link-2" href="../../researchers/danger_zone.html">Danger Zone</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle nav-item-toggle-level-2"></button>
    <a class="nav-link nav-link-2" href="../../researchers/topics/index.html">Topics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/topics/apis.html">APIs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/topics/continuation.html">Continuation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/topics/project_logs.html">Project Logs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../researchers/topics/templating_features.html">Template Rendering</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle nav-item-toggle-level-1"></button>
    <a class="nav-link nav-link-1" href="../../administrators/index.html">Administrators</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-link-2" href="../../administrators/installation.html">Installation Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle nav-item-toggle-level-2"></button>
    <a class="nav-link nav-link-2" href="../../administrators/topics/index.html">Topic References</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../administrators/topics/customize_ckeditor_configs.html">CKEditor Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../administrators/topics/customize_admin_templates.html">Template Customization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="../../administrators/topics/user_authentication.html">User Authentication</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle nav-item-toggle-level-1"></button>
    <a class="nav-link nav-link-1" href="../index.html">Developers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle nav-item-toggle-level-2"></button>
    <span class="nav-text nav-text-2">Topics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="documentation.html">Documentation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link nav-link-3" href="encryption.html">Encryption</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link nav-link-3" href="internationalization.html">Internationalization</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">DDM</span>
    <span class="version">main</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">DDM</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">main</a>
        </li>
        <li class="version">
          <a href="../../../develop/index.html">develop</a>
        </li>
        <li class="version">
          <a href="../../../v1.0.19/index.html">v1.0.19</a>
        </li>
        <li class="version">
          <a href="../../../v1.0.0/index.html">v1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<!--
-->
<!-- <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">DDM</a></li>
    <li><a href="../index.html">Developers</a></li>
    <li>Topics</li>
    <li><a href="encryption.html">Encryption</a></li>
  </ul>
</nav>
 -->
<!-- <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">main</button>
  <div class="version-menu">
    <a class="version is-current" href="encryption.html">main</a>
    <a class="version" href="../../../develop/developers/topics/encryption.html">develop</a>
    <a class="version is-missing" href="../../../v1.0.19/index.html">v1.0.19</a>
    <a class="version is-missing" href="../../../v1.0.0/index.html">v1.0.0</a>
  </div>
</div>
 -->
<!--
-->
</div>
  <div class="content">
<aside class="toc sidebar" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
  <nav class="breadcrumbs-article" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">DDM</a></li>
    <li>        <a href="../index.html">Developers</a>
</li>
    <li>Topics</li>
    <li>        <span class="is-current">Encryption</span>
</li>
  </ul>
</nav>
  <h1 class="page">Data Encryption</h1>
  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page describes what types of encryption should be used by the system hosting this module and what is implemented in this module.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encryption_in_transit_and_at_rest"><a class="anchor" href="#_encryption_in_transit_and_at_rest"></a>Encryption in transit and at rest</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_encryption_in_transit"><a class="anchor" href="#_encryption_in_transit"></a>Encryption in transit</h3>
<div class="paragraph">
<p>It is site-level responsibility to setup encryption in transit, like SSL/TLS for all communication between clients and the server.
For some hints on how this should be setup, start with the <a href="https://docs.djangoproject.com/en/4.0/topics/security/#ssl-https&gt;">Django docs</a>.
We minimize the amount of potential data that is processed on the server, by doing most of the filtering client-side.
Do take into account that ideally the connection from system to the database is secured as well, and that the database is stored on an encrypted system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_encryption_at_rest"><a class="anchor" href="#_encryption_at_rest"></a>Encryption at rest</h3>
<div class="paragraph">
<p>The module stores all data in encrypted fields in the database, the encryption/decryption procedure is described below.
Each project has a unique <code>salt</code> that is generated when creating the project.
In the Django site settings, we use the <strong>SECRET_KEY</strong> as the default passphrase for encryption.
If a project is working with sensitive data, we recommend that a <strong>project specific password</strong> is set.
This password is only known by the person setting it and should not be shared.
A project specific password will limit the functionality of the module for a given project: it won&#8217;t be possible to
create follow-up questions based on the data donation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encryption_and_decryption_process"><a class="anchor" href="#_encryption_and_decryption_process"></a>Encryption and decryption process</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_steps"><a class="anchor" href="#_steps"></a>Steps</h3>
<div class="paragraph">
<p>We use a hybrid asymmetric/symmetric encryption approach, due to the size limitation of the pure asymmetric approach.
The encryption process consists of the following steps:
- generate a public key and store it in the project (if none exists)
- generate a session key used for encrypting a single message
- encrypt the data symmetrically using the session key
- encrypt the session key using the public key asymmetrically
- store the encrypted data with the encrypted key as header</p>
</div>
<div class="paragraph">
<p>The decryption process consists of the following steps:
- generate a private key
- get the desired encrypted data from the project
- decrypt the encrypted session key (header) asymmetrically using the private key
- decrypt the data using the decrypted session key symmetrically</p>
</div>
</div>
<div class="sect2">
<h3 id="_asymmetric_key_generation_and_process"><a class="anchor" href="#_asymmetric_key_generation_and_process"></a>Asymmetric Key Generation and process</h3>
<div class="paragraph">
<p>For encryption we only need the public key;
- Check if we have a public key that is saved for the project
- if not, we should have gotten a passphrase and a salt with which we can generate a public key.&#8201;&#8212;&#8201;generate the private key&#8201;&#8212;&#8201;derive the public key&#8201;&#8212;&#8201;save the public key for the project
- We then use <a href="https://tools.ietf.org/html/rfc8017">PKCS#1 OAEP</a> for the wrapping and OAEP padding.</p>
</div>
<div class="paragraph">
<p>For decryption we need the private key;
- Using the supplied passphrase and salt, we generate a 128bit <a href="https://en.wikipedia.org/wiki/HMAC">HMAC</a> digest, which we use to populate a pseudo-random number generator.
- This random number generator is used to generate our <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA</a> key.
- We then use <a href="https://tools.ietf.org/html/rfc8017">PKCS#1 OAEP</a> for wrapping the OAEP padding.</p>
</div>
</div>
<div class="sect2">
<h3 id="_symmetric_key_generation_and_process"><a class="anchor" href="#_symmetric_key_generation_and_process"></a>Symmetric Key Generation and process</h3>
<div class="paragraph">
<p>There are significant limitations on the size of the data that can be encrypted using asymmetric algorithms and severe performance penalties.
This is why we combine this with symmetric encryption.
In our case we use <a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard&gt;">AES</a> to encrypt the actual data.</p>
</div>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="documentation.html">Documentation</a></span>
  <span class="next"><a href="internationalization.html">Internationalization</a></span>
</nav>
</article>
  </div>
</main>
<div id="overlay"></div>
</div>
<footer class="footer">
  <div class="footer-content-bite"><a href="https://datadonation.uzh.ch"><img src="../../../../_/img/DataDonationLab_Logo_Schwarz.svg" height="50px"></a></div>
  <div class="footer-content-bite">Â© Data Donation Lab, 2023-present</div>
  <div class="footer-content-bite"><a href="https://github.com/uzh/ddm">DDM on GitHub</a></div>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
